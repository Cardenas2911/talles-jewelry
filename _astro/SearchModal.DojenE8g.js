import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as a}from"./index.DYrVU9rO.js";import{u as p}from"./index.UAoeNl1H.js";import{s as l,i as h}from"./search.X5QTXqBq.js";import{c as g}from"./gql.CcRsQPGR.js";import{S as y}from"./search.Ek1POTBf.js";import"./index.daetGfa_.js";function R(){const i=p(h),[t,x]=a.useState(""),[n,o]=a.useState([]),[u,d]=a.useState(!1),c=a.useRef(null);return a.useEffect(()=>{i&&c.current&&setTimeout(()=>c.current?.focus(),100)},[i]),a.useEffect(()=>{const s=setTimeout(async()=>{if(t.trim().length>2){d(!0);try{const r=await g.request(y,{variables:{query:`title:${t}* OR tag:${t}*`}});console.log("Search response:",r);const m=r.data?.products||r.products;o(m?m.edges.map(f=>f.node):[])}catch(r){console.error("Search error:",r)}finally{d(!1)}}else o([])},300);return()=>clearTimeout(s)},[t]),i?e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-start justify-center pt-0 md:pt-20 px-0 md:px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>l(!1)}),e.jsxs("div",{className:"relative w-full h-full md:h-auto md:max-h-[85vh] max-w-3xl bg-white md:rounded-2xl shadow-2xl overflow-hidden animate-fade-in-up flex flex-col",children:[e.jsxs("div",{className:"flex items-center p-4 md:p-6 border-b border-gray-100 shrink-0 gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-[#d4af37] text-2xl md:text-3xl",children:"search"}),e.jsx("input",{ref:c,type:"text",placeholder:"Buscar joyas (ej. Cruz, Oro)...",className:"flex-1 text-lg md:text-xl outline-none text-gray-900 placeholder:text-gray-400 font-serif bg-transparent",value:t,onChange:s=>x(s.target.value),onKeyDown:s=>{s.key==="Enter"&&(window.location.href=`/busqueda?q=${t}`,l(!1))}}),e.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-500 hover:text-red-500",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"close"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-[#FAFAF5]/50 p-4 md:p-6 min-h-[50vh]",children:u?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-400 gap-3",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-[#d4af37] border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-sm tracking-widest uppercase",children:"Buscando..."})]}):n.length>0?e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs font-bold uppercase text-gray-400 mb-4 tracking-wider px-1",children:["Resultados (",n.length,")"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 md:gap-4",children:n.map(s=>e.jsxs("a",{href:`/producto/${s.handle}`,className:"bg-white p-2 md:p-3 rounded-lg shadow-sm hover:shadow-md transition-all group flex flex-col gap-3 border border-gray-100",onClick:()=>l(!1),children:[e.jsx("div",{className:"aspect-square bg-gray-100 rounded-md overflow-hidden relative",children:e.jsx("img",{src:s.featuredImage?.url,alt:s.featuredImage?.altText||s.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"})}),e.jsxs("div",{className:"px-1 pb-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 line-clamp-2 md:line-clamp-1 group-hover:text-[#d4af37] transition-colors mb-1 leading-tight",children:s.title}),e.jsxs("p",{className:"text-sm font-bold text-[#d4af37]",children:["$",parseFloat(s.priceRange.minVariantPrice.amount).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2})]})]})]},s.id))})]}):t.length>2?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center text-gray-500",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl mb-3 text-gray-400",children:"search_off"}),e.jsxs("p",{children:['No encontramos resultados para "',t,'"']}),e.jsx("p",{className:"text-sm mt-2 text-gray-400",children:'Intenta con "Cadena", "Oro" o "Medalla"'})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center text-gray-500",children:[e.jsx("span",{className:"material-symbols-outlined text-6xl mb-4 text-gray-300",children:"diamond"}),e.jsx("p",{className:"text-lg font-serif",children:"Empieza a escribir para buscar"}),e.jsx("p",{className:"text-xs uppercase tracking-widest mt-2 text-gray-400",children:"Explora nuestro cat√°logo exclusivo"})]})})]})]}):null}export{R as default};
