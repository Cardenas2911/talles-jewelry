import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as l}from"./index.DYrVU9rO.js";import{u}from"./index.UAoeNl1H.js";import{s as c,r as g,u as m,i as w,c as N}from"./cart.BbSNlSNJ.js";import{g as y,c as v}from"./gql.CcRsQPGR.js";import"./index.rsHMLtC6.js";import"./index.daetGfa_.js";const C=y`
  mutation cartCreate($input: CartInput) {
    cartCreate(input: $input) {
      cart {
        id
        checkoutUrl
      }
      userErrors {
        field
        message
      }
    }
  }
`;function T(){const o=u(w),h=u(N),[f,p]=l.useState(!1),[i,d]=l.useState(!1);l.useEffect(()=>{p(!0)},[]);const a=Object.values(h),n=a.reduce((t,s)=>t+s.price*s.quantity,0),x=n*.07,j=n+x,b=async()=>{d(!0);const t={lines:a.map(s=>({merchandiseId:s.id,quantity:s.quantity}))};console.log("Starting checkout with input:",t);try{const s=await v.request(C,{variables:{input:t}});console.log("Shopify Cart Response:",JSON.stringify(s,null,2));const{data:r}=s;r?.cartCreate?.cart?.checkoutUrl?(console.log("Redirecting to:",r.cartCreate.cart.checkoutUrl),window.location.href=r.cartCreate.cart.checkoutUrl):(console.error("No checkout URL returned",JSON.stringify(s,null,2)),r?.cartCreate?.userErrors?.length>0&&console.error("User Errors:",JSON.stringify(r.cartCreate.userErrors,null,2)))}catch(s){console.error("Checkout error:",s)}finally{d(!1)}};return f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fixed inset-0 bg-black/60 backdrop-blur-sm z-50 transition-opacity duration-300 ${o?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:()=>c(!1)}),e.jsxs("div",{className:`fixed top-0 right-0 h-full w-full max-w-md bg-[#050505] text-[#FAFAF5] shadow-2xl transform transition-transform duration-300 z-50 flex flex-col border-l border-[#d4af37]/20 ${o?"translate-x-0":"translate-x-full"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#d4af37]/10",children:[e.jsx("h2",{className:"text-xl font-serif tracking-wide text-[#d4af37]",children:"Tu Selección"}),e.jsx("button",{onClick:()=>c(!1),className:"text-white/60 hover:text-[#d4af37] transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"close"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:a.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center space-y-4 opacity-60",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl text-[#d4af37]",children:"shopping_bag"}),e.jsx("p",{className:"font-light",children:"Tu carrito está vacío."}),e.jsx("button",{onClick:()=>c(!1),className:"text-[#d4af37] underline underline-offset-4 text-sm uppercase tracking-wider hover:text-white",children:"Seguir Comprando"})]}):a.map(t=>e.jsxs("div",{className:"flex gap-4 group",children:[e.jsx("div",{className:"w-24 h-24 bg-[#121212] rounded overflow-hidden relative border border-white/5",children:e.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"font-medium text-white/90 leading-tight",children:t.title}),e.jsx("button",{onClick:()=>g(t.id),className:"text-white/40 hover:text-red-400 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})]}),t.variantTitle&&e.jsx("p",{className:"text-sm text-white/50 mt-1",children:t.variantTitle})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center border border-white/10 rounded",children:[e.jsx("button",{onClick:()=>m(t.id,t.quantity-1),className:"px-2 py-1 hover:bg-white/5 text-white/60",children:"-"}),e.jsx("span",{className:"px-2 text-sm text-[#d4af37]",children:t.quantity}),e.jsx("button",{onClick:()=>m(t.id,t.quantity+1),className:"px-2 py-1 hover:bg-white/5 text-white/60",children:"+"})]}),e.jsxs("p",{className:"font-bold text-[#d4af37]",children:["$",(t.price*t.quantity).toLocaleString()]})]})]})]},t.id))}),a.length>0&&e.jsxs("div",{className:"bg-[#121212] p-6 border-t border-[#d4af37]/10 space-y-4",children:[e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between text-white/60",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",n.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-white/60",children:[e.jsx("span",{children:"Envío (Asegurado)"}),e.jsx("span",{className:"text-[#d4af37] font-medium",children:"GRATIS"})]}),e.jsxs("div",{className:"flex justify-between text-white/60",children:[e.jsx("span",{children:"Impuestos Estimados (7%)"}),e.jsxs("span",{children:["$",x.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-white/5 flex justify-between items-end",children:[e.jsx("span",{className:"text-white/80 font-medium",children:"Total"}),e.jsxs("span",{className:"text-2xl font-serif text-[#d4af37]",children:["$",j.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("p",{className:"text-xs text-center text-white/40 flex items-center justify-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"verified_user"}),"Sin cargos ocultos. El precio que ves es el que pagas."]}),e.jsx("button",{onClick:b,disabled:i,className:`w-full bg-[#d4af37] text-[#050505] font-bold py-4 uppercase tracking-widest hover:bg-[#fff] hover:text-[#000] transition-colors duration-300 shadow-[0_0_20px_rgba(212,175,55,0.2)] flex justify-center items-center ${i?"opacity-70 cursor-not-allowed":""}`,children:i?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-4 h-4 border-2 border-black/30 border-t-black rounded-full animate-spin"}),"Procesando..."]}):"Proceder al Pago"})]})]})]}):null}export{T as default};
