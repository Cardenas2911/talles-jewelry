import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as p}from"./index.DYrVU9rO.js";import{u as b}from"./index.UAoeNl1H.js";import{t as v,f as j}from"./favorites.DkMsVsUx.js";import{a as N,s as k}from"./cart.BbSNlSNJ.js";import{r as g}from"./paths.BCg1NTiL.js";function z({product:a}){const r=!!b(j)[a.id],[i,o]=p.useState(!1),[d,c]=p.useState(!1),u=a.tags?.includes("Nuevo")||a.tags?.includes("New"),m=a.totalInventory||a.variants?.edges?.[0]?.node?.quantityAvailable||0,h=m>0&&m<5,s=a.featuredImage?.url,n=a.images?.edges?.find(t=>t.node.url!==s)?.node?.url,f=a.variants?.edges?.[0]?.node?.id||a.id,l=parseFloat(a.priceRange.minVariantPrice.amount),x=async t=>{t.preventDefault(),t.stopPropagation(),c(!0),N({id:f,title:a.title,price:l,image:s,handle:a.handle,quantity:1}),setTimeout(()=>{c(!1),k(!0)},600)};return e.jsxs("article",{className:"group relative flex flex-col h-full bg-transparent transition-all duration-300",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[e.jsxs("div",{className:"relative aspect-[4/5] overflow-hidden bg-[#111111] border border-transparent group-hover:border-[#d4af37] transition-colors duration-300",children:[e.jsxs("a",{href:g(`/producto/${a.handle}`),className:"block w-full h-full relative",children:[e.jsx("img",{src:s,alt:a.featuredImage?.altText||a.title,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-700 ease-in-out ${i&&n?"opacity-0":"opacity-100"}`,loading:"lazy"}),n&&e.jsx("img",{src:n,alt:`${a.title} - Puesto`,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-700 ease-in-out ${i?"opacity-100":"opacity-0"}`,loading:"lazy"})]}),e.jsxs("div",{className:"absolute top-0 left-0 p-3 flex flex-col gap-1 z-20",children:[u&&e.jsx("span",{className:"bg-[#d4af37] text-black text-[10px] font-sans font-bold px-2 py-1 uppercase tracking-wider",children:"Nuevo"}),h&&e.jsx("span",{className:"bg-[#d4af37] text-black text-[10px] font-sans font-bold px-2 py-1 uppercase tracking-wider",children:"Pocas Piezas"})]}),e.jsx("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),v({id:a.id,handle:a.handle,title:a.title,price:a.priceRange.minVariantPrice.amount,image:s,variantId:f})},className:"absolute top-0 right-0 p-3 z-30 group/fav","aria-label":"Agregar a favoritos",children:e.jsx("span",{className:`material-symbols-outlined text-[24px] transition-all duration-300 ${r?"filled text-[#d4af37] animate-pulse-once":"text-white group-hover/fav:text-[#d4af37]"}`,style:r?{fontVariationSettings:"'FILL' 1"}:{},children:"favorite"})}),e.jsx("div",{className:`absolute bottom-0 left-0 w-full p-4 z-20 transition-transform duration-500 ease-out hidden md:block ${i?"translate-y-0":"translate-y-full"}`,children:e.jsx("button",{onClick:x,disabled:d,className:"w-full py-3 border border-[#d4af37] bg-black/40 backdrop-blur-sm text-[#d4af37] font-sans font-bold text-[11px] uppercase tracking-[2px] hover:bg-[#d4af37] hover:text-black transition-all duration-300 flex items-center justify-center gap-2",children:d?e.jsx("span",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Añadir Rápido"}),e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"shopping_bag"})]})})})]}),e.jsxs("div",{className:"pt-4 flex flex-col gap-1 px-3 pb-3",children:[e.jsx("div",{className:"text-[10px] text-[#A0A0A0] uppercase tracking-widest font-medium",children:a.title.includes("10k")?"Oro 10k Garantizado":a.title.includes("18k")?"Oro 18k Garantizado":"Oro 14k Garantizado"}),e.jsx("h3",{className:"text-[#FAFAF5] font-sans font-semibold text-sm md:text-[15px] leading-tight tracking-wide line-clamp-2 h-[2.4em] mb-1",children:e.jsx("a",{href:g(`/producto/${a.handle}`),className:"hover:text-[#d4af37] transition-colors",children:a.title})}),e.jsxs("div",{className:"mt-1",children:[e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsxs("span",{className:"text-[#d4af37] font-serif text-lg md:text-xl",children:["$",l.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})]})}),e.jsxs("div",{className:"text-[9px] text-[#888] mt-0.5 font-light tracking-wide flex items-center gap-1",children:["o 4 pagos de $",(l/4).toLocaleString("en-US",{maximumFractionDigits:0})," con",e.jsx("span",{className:"font-bold text-gray-500",children:"Affirm"})]})]}),e.jsx("div",{className:"md:hidden mt-3",children:e.jsx("button",{onClick:x,className:"w-full py-2.5 border border-[#d4af37]/50 text-[#d4af37] text-[10px] uppercase font-bold tracking-widest flex items-center justify-center gap-2 active:bg-[#d4af37] active:text-black transition-colors",children:"Añadir"})})]})]})}export{z as P};
