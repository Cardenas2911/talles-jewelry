import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as t}from"./index.DYrVU9rO.js";import{c as u}from"./gql.CcRsQPGR.js";import{S as f}from"./search.Ek1POTBf.js";function N(){const[n,c]=t.useState(""),[l,i]=t.useState([]),[d,r]=t.useState(!0);t.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("q")||"";c(a),a?m(a):r(!1)},[]);const m=async s=>{r(!0);try{const a=await u.request(f,{variables:{query:`title:${s}* OR tag:${s}*`}}),o=a.data?.products||a.products;i(o?o.edges.map(x=>x.node):[])}catch(a){console.error("Search Page error:",a)}finally{r(!1)}};return e.jsxs("div",{className:"w-full",children:[e.jsxs("h1",{className:"text-3xl font-serif text-[#FAFAF5] mb-8",children:["Resultados para: ",e.jsxs("span",{className:"text-[#d4af37]",children:['"',n,'"']})]}),d?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx("div",{className:"w-10 h-10 border-2 border-[#d4af37] border-t-transparent rounded-full animate-spin"})}):l.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-4 md:gap-x-6 gap-y-10",children:l.map(s=>e.jsxs("div",{className:"group cursor-pointer",children:[e.jsx("div",{className:"relative aspect-[4/5] rounded-lg overflow-hidden bg-[#121212] mb-3 shadow-md transition-transform duration-500 group-hover:scale-[1.02]",children:e.jsx("a",{href:`/producto/${s.handle}`,className:"absolute inset-0 z-0 block",children:e.jsx("img",{src:s.featuredImage?.url,alt:s.featuredImage?.altText||s.title,className:"w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity duration-500",loading:"lazy"})})}),e.jsxs("div",{className:"text-center px-1 flex flex-col gap-2",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-200 line-clamp-1 group-hover:text-[#d4af37] transition-colors tracking-wide",children:e.jsx("a",{href:`/producto/${s.handle}`,children:s.title})}),e.jsxs("p",{className:"text-md font-bold text-[#d4af37]",children:["$",parseFloat(s.priceRange.minVariantPrice.amount).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2})]})]})]},s.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center text-gray-400",children:[e.jsx("span",{className:"material-symbols-outlined text-6xl mb-4 opacity-50",children:"search_off"}),e.jsx("p",{className:"text-xl",children:"No encontramos resultados para tu búsqueda."}),e.jsx("a",{href:"/tienda",className:"mt-6 text-[#d4af37] hover:underline",children:"Ver todo el catálogo"})]})]})}export{N as default};
